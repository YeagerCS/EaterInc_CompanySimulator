# Eater Inc.

## Description
Eater Inc. is an employee & bank manager web application which uses React in the frontend and node with express in the backend. 

## Features
### Detailed Description
The application consists of a frontend web page which has an admin- and an employee dashboard. There is an admin account, which is the CEO of the fictional company "The Eater Inc.", who can add other employees and pay them a salary. Every employee gets a password generated and can log into their account. Upon login, the user gets the option to choose a Bank for themselves, in which they want to store their money. The CEO has an bank account aswell and pays salary to the employees. The admin can update employees' details, give them raises, change job titles and so on. Each employee, when they logged in to their account, can complete transactions, by sending money to other employees. An employee can enter another employees name and then choose the searched employee from a list.

### Admin
The admin has some differences from regular employees.  
Admin login credentials:
```
Employee Number: 1000
Password: the
```
- The admin account is assigned to the bank with Id 1 => Battle Bus Banking Co.
- The admin has an initial balance ranging from `6mio to 17mio`
- You can modify admin data in `/server/services/initAdmin.js` and `/server/services/initCompanyBankAccount.js`
- The company currently does not earn any money.
- The admin can take loans from his bank, that he has to pay back with interest


### Employees and Accounts
The admin can add employees, which will add an Employee object into the database. Also, an Account will be generated for the created employee. The Account has a random password and an incrementing employee number. The details are sent to the employees' email, which the admin specified. Until the employee logs into their account, they don't get paid any salary. After an employee logs into their generated account, they choose one of the given banks and get a bank account generated, assigning them to the chosen bank.  

#### E-Mail Service
Emails get sent with nodemailer, you can configure your email in `/server/services/mailconfig.js` and `/server/services/mailer.js`.  
The email gets sent using a handlebars template which can be found in `/server/templates/mail-template.hbs`. The dynamic data passed into the mail template can be found within the employee controller.


### Banks
There are some banks generated by default.  
Banks have the following properties:
- name
- capital
- interest
- reference
- hq
- BankId

The capital is currently only affected by loans being taken. Interest is applied in the salary payment and in loan payment. The reference number can be used to create transactions between banks and bank accounts, which will be implemented in the future. The BankId in the Banks' properties is simply the parent bank. Not every bank needs to have a parent bank, so it's optional.
**You can modify the default banks in `/server/services/initBanks.js`**


### Bank Accounts
Like mentioned before, employees can chose a bank and then get their bank account generated. Each employee gets assigned to the bank account and immediately after creation, the CEO account pays their one years salary to the employee and the bank which the employee chose, applies interest to that payment. (In the future, the bank should pay interest from their capital).  
Bank Accounts have the following properties:
- reference
- balance
- transactions
- loans
- BankId

Each bank account belongs to a bank. Bank accounts have transaction that they've completed with other bank accounts. Bank accounts communicate with the reference numbers, which are also written down in transactions. Currently only the admin bank account can take loans from their bank, for company money, but regular employees should be able to do so aswell, in the future.


### Transactions and Loans
Transaction and Loans have similar properties:
- source
- target
- amount
- date
- bankAccountId
The source and target represent reference numbers of two bank accounts or banks. For every completed transaction, there exist at least two transaction objects. One with the source bankAccountId and one with the target bankAccountId, so that both parties can access their transactions easily.



### Simulation
The simulation asynchronously in the background. The entire simulation is implemented in `/server/simulation/simulation.js` and it works as follows: 
- Months are defined within smaller intervals, eg. `1 Month <=> 1 Hour`
- Salaries are paid monthly
- Loans are paid back yearly
- Every 15 minutes, a timestamp gets saved into a file for when the server would be shut down the timer doesn't start from 0.
Each payment for a salary is sent from the admins bank account to the employees account.

#### Math behind the payment
##### Salary
The yearly salary simply gets divided by 12 to obtain the monthly salary and this amount is also removed from the admins account. The total payout which an employee gets consists of the salary amount and an added intresest from their bank.  
Banks have a yearly interest rate and since yearly percentage payments represent an exponential process of exponential growth, monthly that means that the interest that needs to be applied is the 12th root of the yearly interest. Here's an overview:
```
(salary / 12) + ((salary / 12) * (interest ^ (1/12)))
```

##### Loans
Loans are paid back by the employee to the bank. The employee has to pay the amount and also the interest that the bank has. So that means:
```
amount + (amount * interest)
```

### Key Employees
Key Employees is a table in the database that represents employees which are important for the company. These employees are then displayed on the 'About Us' page with their picture. In the admin dashboard, the admin can edit employees and also set an employee as a key employee by uploading a picutre for an employee. This employee will immedtialey be displayed on the about us page. The Chiefs are currently hardcodedly displayed as the top three employees, by checking if the word 'Chief' is in the job title, which can be done better.
